@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --font-family: "darkmode-off";
    --font-family-inverse: "darkmode-on";

    /* general display colors */
    --display-inverse-primary: 0deg 0% 100%;
    --display-inverse-secondary: 0deg 0% 100% / 83%;
    --display-inverse-tertiary: 0deg 0% 100% / 75%;
    --display-link: 202deg 100% 36%;

    /* ui colors */
    --applet-bg-base: 0deg 0% 100%;
    --applet-bg: var(--applet-bg-base) / 100%;
    --applet-header-highlight: 0deg 0% 100%;
    --divider: 0deg 0% 0% / 7%;
    --topbar-bg: 0deg 0% 100% / 40%;

    /* shadow colors */
    --shadow-photos: 20deg 100% 13%;
    --shadow-design: 270deg 35% 13%;
    --shadow-posts: 41deg 80% 13%;
    --shadow-music: 91deg 25% 13%;
    --shadow-chat: 206deg 80% 13%;
  }

  [data-active-applet="photos"] {
    --clr-wallpaper: 20deg 36% 95%;
    --global-shadow-color: var(--shadow-photos);
  }
  [data-applet="photos"] {
    --clr-solid: 8deg 97% 65%;
    --clr-tint: 20deg 100% 95%;
    --clr-neutral: 20deg 9% 96%;
    --btn-bg: 20deg 20% 99% / 1;
    --btn-bg-hover: 20deg 20% 97%;
    --btn-secondary-bg: var(--scoped-shadow-color);
    --scoped-shadow-color: var(--shadow-photos);
    --display-primary: 8deg 18% 10%;
    --display-secondary: 8deg 40% 8% / 78%;
    --display-tertiary: 8deg 18% 10% / 50%;
    --shade: var(--display-primary) / 50%;
  }

  [data-active-applet="design"] {
    --clr-wallpaper: 245deg 30% 95%;
    --global-shadow-color: var(--shadow-design);
  }
  [data-applet="design"] {
    --clr-solid: 245deg 81% 60%;
    --clr-tint: 246deg 100% 96%;
    --clr-neutral: 267deg 10% 96%;
    --btn-bg: 240deg 20% 99%;
    --btn-bg-hover: 240deg 7% 97%;
    --btn-secondary-bg: var(--scoped-shadow-color);
    --scoped-shadow-color: var(--shadow-design);
    --display-primary: 246deg 18% 10%;
    --display-secondary: 246deg 30% 8% / 78%;
    --display-tertiary: 246deg 28% 10% / 50%;
    --shade: var(--display-primary) / 50%;
  }

  [data-active-applet="posts"] {
    --clr-wallpaper: 45deg 46% 95%;
    --global-shadow-color: var(--shadow-posts);
  }
  [data-applet="posts"] {
    --clr-solid: 32deg 79% 58%;
    --clr-tint: 42deg 100% 93%;
    --clr-neutral: 30deg 8% 96%;
    --btn-bg: 60deg 20% 99% / 1;
    --btn-bg-hover: 60deg 13% 97%;
    --btn-secondary-bg: var(--scoped-shadow-color);
    --scoped-shadow-color: var(--shadow-posts);
    --display-primary: 22deg 18% 10%;
    --display-secondary: 22deg 30% 8% / 78%;
    --display-tertiary: 22deg 8% 10% / 50%;
    --shade: var(--display-primary) / 50%;
  }

  [data-active-applet="music"] {
    --clr-wallpaper: 90deg 23% 95%;
    --global-shadow-color: var(--shadow-music);
  }
  [data-applet="music"] {
    --clr-solid: 173deg 57% 46%;
    --clr-tint: 144deg 66% 92%;
    --clr-neutral: 150deg 10% 96%;
    --btn-bg: 150deg 20% 99% / 1;
    --btn-bg-hover: 150deg 13% 97%;
    --btn-secondary-bg: var(--scoped-shadow-color);
    --scoped-shadow-color: var(--shadow-music);
    --btn-highlight-bg: var(--clr-solid);
    --btn-highlight-bg-hover: 173deg 54% 43%;
    --btn-highlight-border: 173deg 77% 34%;
    --display-primary: 144deg 18% 10%;
    --display-secondary: 144deg 30% 8% / 78%;
    --display-tertiary: 144deg 28% 10% / 50%;
    --shade: var(--display-primary) / 50%;
  }

  [data-active-applet="chat"] {
    --clr-wallpaper: 204deg 38% 95%;
    --global-shadow-color: var(--shadow-chat);
  }
  [data-applet="chat"] {
    --clr-solid: 202deg 92% 48%;
    --clr-tint: 208deg 100% 94%;
    --clr-neutral: 204deg 20% 95%;
    --btn-bg: 200deg 20% 99% / 1;
    --btn-bg-hover: 200deg 20% 97%;
    --btn-secondary-bg: var(--scoped-shadow-color);
    --scoped-shadow-color: var(--shadow-chat);
    --btn-highlight-bg: var(--clr-solid);
    --btn-highlight-bg-hover: 202deg 90% 43%;
    --btn-highlight-border: 202deg 62% 40%;
    --display-primary: 208deg 18% 10%;
    --display-secondary: 208deg 60% 8% / 78%;
    --display-tertiary: 208deg 50% 10% / 50%;
    --shade: var(--display-primary) / 50%;
  }

  :root .dark {
    --font-family: "darkmode-on";
    --font-family-inverse: "darkmode-off";
    --display-link: 202deg 100% 36%;

    /* ui colors */
    --applet-header-highlight: 0deg 0% 100%;
    --topbar-bg: 0deg 0% 100% / 8%;
    --applet-bg-opacity: 80%;

    /* shadow colors */
    --shadow-photos: 40deg 100% 2%;
    --shadow-chat: 202deg 100% 2%;
    --shadow-design: 245deg 100% 2%;
    --shadow-music: 150deg 100% 2%;
    --shadow-posts: 45deg 100% 2%;
  }

  .dark [data-active-applet="photos"] {
    --clr-wallpaper: 10deg 5% 6%;
    --global-shadow-color: var(--shadow-photos);
  }
  .dark [data-applet="photos"] {
    --applet-bg-base: 10deg 8% 13%;
    --applet-bg: var(--applet-bg-base) / var(--applet-bg-opacity);
    --applet-header-highlight: 10deg 50% 85%;
    --divider: var(--applet-header-highlight) / 13%;
    --clr-solid: 10deg 63% 58%;
    --clr-tint: 10deg 24% 19%;
    --clr-neutral: 13deg 3% 18%;
    --btn-bg: 10deg 7% 18%;
    --btn-bg-hover: 10deg 7% 20%;
    --btn-secondary-bg: var(--applet-header-highlight);
    --scoped-shadow-color: var(--shadow-photos);
    --display-primary: 10deg 2% 85%;
    --display-secondary: 10deg 1% 72%;
    --display-tertiary: 10deg 1% 52%;
    --display-inverse-primary: var(--applet-bg-base) / 90%;
    --display-inverse-secondary: var(--applet-bg-base) / 70%;
    --display-inverse-tertiary: var(--applet-bg-base) / 50%;
    --shade: var(--display-inverse-primary) / 50%;
    --topbar-bg: 20deg 22% 13%;
  }

  .dark [data-active-applet="chat"] {
    --clr-wallpaper: 202deg 5% 6%;
    --global-shadow-color: var(--shadow-chat);
  }
  .dark [data-applet="chat"] {
    --applet-bg-base: 202deg 3% 13%;
    --applet-bg: var(--applet-bg-base) / var(--applet-bg-opacity);
    --applet-header-highlight: 202deg 50% 85%;
    --divider: var(--applet-header-highlight) / 13%;
    --clr-solid: 205deg 84% 54%;
    --clr-tint: 210deg 25% 21%;
    --clr-neutral: 210deg 5% 19%;
    --btn-bg: 202deg 7% 18%;
    --btn-bg-hover: 202deg 7% 20%;
    --btn-secondary-bg: var(--applet-header-highlight);
    --scoped-shadow-color: var(--shadow-chat);
    --display-primary: 202deg 2% 85%;
    --display-secondary: 202deg 1% 72%;
    --display-tertiary: 202deg 1% 52%;
    --display-inverse-primary: var(--applet-bg-base) / 90%;
    --display-inverse-secondary: var(--applet-bg-base) / 70%;
    --display-inverse-tertiary: var(--applet-bg-base) / 50%;
    --shade: var(--display-inverse-primary) / 50%;
    --topbar-bg: 202deg 10% 13%;
  }

  .dark [data-active-applet="design"] {
    --clr-wallpaper: 245deg 5% 6%;
    --global-shadow-color: var(--shadow-design);
  }
  .dark [data-applet="design"] {
    --applet-bg-base: 245deg 3% 13%;
    --applet-bg: var(--applet-bg-base) / var(--applet-bg-opacity);
    --applet-header-highlight: 245deg 50% 85%;
    --divider: var(--applet-header-highlight) / 13%;
    --clr-solid: 235deg 77% 63%;
    --clr-tint: 238deg 16% 21%;
    --clr-neutral: 238deg 2% 18%;
    --btn-bg: 240deg 6% 18%;
    --btn-bg-hover: 240deg 6% 20%;
    --btn-secondary-bg: var(--applet-header-highlight);
    --scoped-shadow-color: var(--shadow-design);
    --display-primary: 245deg 2% 85%;
    --display-secondary: 245deg 1% 72%;
    --display-tertiary: 245deg 1% 52%;
    --display-inverse-primary: var(--applet-bg-base) / 90%;
    --display-inverse-secondary: var(--applet-bg-base) / 70%;
    --display-inverse-tertiary: var(--applet-bg-base) / 50%;
    --shade: var(--display-inverse-primary) / 50%;
    --topbar-bg: 245deg 10% 13%;
  }

  .dark [data-active-applet="music"] {
    --clr-wallpaper: 150deg 5% 6%;
    --global-shadow-color: var(--shadow-music);
  }
  .dark [data-applet="music"] {
    --applet-bg-base: 172deg 2% 13%;
    --applet-bg: var(--applet-bg-base) / var(--applet-bg-opacity);
    --applet-header-highlight: 172deg 30% 85%;
    --divider: var(--applet-header-highlight) / 13%;
    --clr-solid: 167deg 100% 38%;
    --clr-tint: 172deg 18% 21%;
    --clr-neutral: 162deg 3% 18%;
    --btn-bg: 172deg 6% 18%;
    --btn-bg-hover: 172deg 6% 20%;
    --btn-secondary-bg: var(--applet-header-highlight);
    --btn-highlight-bg-hover: 172deg 70% 29%;
    --btn-highlight-border: 172deg 77% 20%;
    --scoped-shadow-color: var(--shadow-music);
    --display-primary: 172deg 2% 85%;
    --display-secondary: 172deg 1% 72%;
    --display-tertiary: 172deg 1% 52%;
    --display-inverse-primary: var(--applet-bg-base) / 90%;
    --display-inverse-secondary: var(--applet-bg-base) / 70%;
    --display-inverse-tertiary: var(--applet-bg-base) / 50%;
    --shade: var(--display-inverse-primary) / 50%;
    --topbar-bg: 172deg 10% 13%;
  }

  .dark [data-active-applet="posts"] {
    --clr-wallpaper: 45deg 5% 6%;
    --global-shadow-color: var(--shadow-posts);
  }
  .dark [data-applet="posts"] {
    --applet-bg-base: 42deg 2% 13%;
    --applet-bg: var(--applet-bg-base) / var(--applet-bg-opacity);
    --applet-header-highlight: 45deg 30% 85%;
    --divider: var(--applet-header-highlight) / 13%;
    --clr-solid: 31deg 59% 57%;
    --clr-tint: 31deg 28% 20%;
    --clr-neutral: 30deg 4% 18%;
    --btn-bg: 45deg 6% 18%;
    --btn-bg-hover: 45deg 6% 20%;
    --btn-secondary-bg: var(--applet-header-highlight);
    --btn-highlight-bg-hover: 45deg 70% 29%;
    --btn-highlight-border: 45deg 77% 20%;
    --scoped-shadow-color: var(--shadow-posts);
    --display-primary: 45deg 2% 80%;
    --display-secondary: 45deg 1% 65%;
    --display-tertiary: 45deg 1% 48%;
    --display-inverse-primary: var(--applet-bg-base) / 90%;
    --display-inverse-secondary: var(--applet-bg-base) / 70%;
    --display-inverse-tertiary: var(--applet-bg-base) / 50%;
    --shade: var(--display-inverse-primary) / 50%;
    --topbar-bg: 45deg 10% 13%;
  }

  /* light mode shadows */
  :root [data-active-applet="photos"],
  :root [data-active-applet="design"],
  :root [data-active-applet="posts"],
  :root [data-active-applet="music"],
  :root [data-active-applet="chat"],
  :root [data-applet="photos"],
  :root [data-applet="design"],
  :root [data-applet="posts"],
  :root [data-applet="music"],
  :root [data-applet="chat"] {
    --shadow-inset-stroke: 0px 0px 0px 0.6px inset hsl(var(--global-shadow-color) / 15%);
    --shadow-applet-header: 0px 1px 1px 0px hsl(var(--scoped-shadow-color) / 3%), 0px 1px 4px 0px hsl(var(--clr-solid) / 15%), 0px 0px 0px 0.6px hsl(var(--scoped-shadow-color) / 10%), inset 0 1px 0px hsl(var(--applet-header-highlight) / 50%), inset 0 -1px 1px -1px hsl(var(--clr-solid) / 15%);
    --shadow-app-icon: 0px 1px 1px 0px hsl(var(--scoped-shadow-color) / 5%), 0px 1px 3px 0px hsl(var(--clr-solid) / 8%), 0 1px 1px 0px inset hsl(var(--applet-header-highlight), 15%), inset 0 -1px 2px -1px hsl(var(--clr-solid) / 20%), 0px 0px 0px 0.6px hsl(var(--scoped-shadow-color) / 12%);
    --shadow-btn-basic: 0px 1px 2px hsl(var(--scoped-shadow-color) / 10%), 0px 0px 0px 0.6px hsl(var(--scoped-shadow-color) / 15%), inset 0 1px 0px hsl(var(--applet-header-highlight) / 50%);
    --shadow-btn-basic-inset: 0px 1px 3px -1px inset hsl(var(--scoped-shadow-color) / 15%), 0px 0px 0px 0.6px hsl(var(--scoped-shadow-color) / 20%);
    --shadow-btn-highlight: 0px 1px 2px hsl(var(--scoped-shadow-color) / 20%), 0px 0px 0px 0.6px hsl(var(--btn-highlight-border) / 80%), 0px 1px 1px 0px hsl(var(--clr-solid) / 80%);
    --shadow-btn-highlight-inset: 0px 1px 1px inset hsl(var(--btn-highlight-border) / 90%), 0px 0px 0px 0.6px hsl(var(--btn-highlight-border));
    --shadow-list-inset: 0px 1px 4px -1px inset hsl(var(--scoped-shadow-color) / 10%), 0px 0.6px 0px inset hsl(var(--scoped-shadow-color) / 7%), 0px 0px 0.6px inset hsl(var(--scoped-shadow-color) / 20%);
    --shadow-topbar: 0px 1px 1px hsl(var(--global-shadow-color) / 15%), 0px 1px 40px hsl(var(--clr-solid) / 5%), 0px 0px 0px 0.6px hsl(var(--global-shadow-color) / 15%);
    --shadow-body: 0px 0px 40px 0px inset hsl(var(--clr-solid) / 20%);
    --shadow-body-login: 0px 0px 120px -40px inset hsl(var(--clr-solid) / 60%);
    --shadow-applet-idle: 0px 1.5px 2.3px hsl(var(--global-shadow-color) / 3%), 0px 3px 4.5px hsl(var(--global-shadow-color) / 8%), 0px 5.9px 8.9px hsl(var(--global-shadow-color) / 12%), 0 0 0 0.6px hsl(var(--global-shadow-color) / 16%);
    --shadow-applet-active: 0px 0px 3.5px hsl(var(--global-shadow-color) / 1%), 0px 0px 6px hsl(var(--global-shadow-color) / 2%), 0px 6px 10px hsl(var(--global-shadow-color) / 4%), 0px 8px 12px hsl(var(--global-shadow-color) / 8%), 0px 10px 16px -2px hsl(var(--global-shadow-color) / 12%),
      0px 15px 25px -3px hsl(var(--global-shadow-color) / 14%), 0 0 0 0.6px hsl(var(--global-shadow-color) / 16%);
    --shadow-cursor: 0 1px 5px hsl(var(--scoped-shadow-color) / 11%), 0px 0px 10px 4px hsl(var(--clr-solid) / 5%), 0px 0px 0px 0.8px hsl(var(--scoped-shadow-color) / 25%);
  }

  /* dark mode shadows */
  :root .dark [data-active-applet="photos"],
  :root .dark [data-active-applet="design"],
  :root .dark [data-active-applet="posts"],
  :root .dark [data-active-applet="music"],
  :root .dark [data-active-applet="chat"],
  :root .dark [data-applet="photos"],
  :root .dark [data-applet="design"],
  :root .dark [data-applet="posts"],
  :root .dark [data-applet="music"],
  :root .dark [data-applet="chat"] {
    --shadow-applet-header: 0px 1px 2px 0px hsl(var(--scoped-shadow-color) / 50%), 0px 4px 6px -4px hsl(var(--clr-solid) / 30%), inset 0px 0px 0px 0.6px hsl(var(--applet-header-highlight) / 10%), inset 0 0.5px 0px 1px hsl(var(--applet-header-highlight) / 7%),
      inset 0 0px 0px 1px hsl(var(--scoped-shadow-color) / 20%);
    /* --shadow-app-icon: 0px 1px 1px 0px hsl(var(--scoped-shadow-color) / 5%), 0px 1px 3px 0px hsl(var(--clr-solid) / 8%), 0 1px 1px 0px inset hsl(var(--applet-header-highlight), 15%), inset 0 -1px 2px -1px hsl(var(--clr-solid) / 20%), 0px 0px 0px 0.6px hsl(var(--scoped-shadow-color) / 12%); */
    --shadow-btn-basic: 0px 1px 2px hsl(var(--scoped-shadow-color) / 50%), 0px 1px 8px -2px hsl(var(--clr-solid) / 10%), 0px 0px 0px 0.6px hsl(var(--applet-header-highlight) / 20%), inset 0px -1px 0px -1px hsl(var(--scoped-shadow-color) / 19%);
    --shadow-btn-basic-inset: 0px 1px 3px -1px inset hsl(var(--scoped-shadow-color) / 65%), 0px 0px 0px 1px hsl(var(--scoped-shadow-color) / 25%), 0px 0px 0px 0.6px hsl(var(--applet-header-highlight) / 15%);
    /* --shadow-btn-highlight: 0px 1px 2px hsl(var(--scoped-shadow-color) / 20%), 0px 0px 0px 0.6px hsl(var(--btn-highlight-border) / 80%), 0px 1px 1px 0px hsl(var(--clr-solid) / 80%); */
    /* --shadow-btn-highlight-inset: 0px 1px 1px inset hsl(var(--btn-highlight-border) / 90%), 0px 0px 0px 0.6px hsl(var(--btn-highlight-border)); */
    --shadow-list-inset: 0px 1px 4px -1px inset hsl(var(--scoped-shadow-color) / 60%), 0px 0.6px 0px inset hsl(var(--scoped-shadow-color) / 60%), 0px 0px 0.6px inset hsl(var(--applet-header-highlight) / 40%);
    --shadow-topbar: 0px 1px 10px hsl(var(--global-shadow-color) / 100%), 0px 1px 40px hsl(var(--clr-solid) / 15%), 0px 0px 0px 0.6px hsl(var(--applet-header-highlight) / 45%);
    --shadow-body: 0px 0px 120px 0px inset hsl(var(--clr-solid) / 10%);
    --shadow-body-login: 0px 0px 120px -40px inset hsl(var(--clr-solid) / 40%);
    --shadow-applet-idle: 0px 1.5px 2.3px hsl(var(--global-shadow-color) / 53%), 0px 3px 4.5px hsl(var(--global-shadow-color) / 58%), 0px 6px 9px hsl(var(--global-shadow-color) / 62%), 0px 0px 24px -4px hsl(var(--clr-solid) / 10%), inset 0 0 0 0.6px hsl(var(--applet-header-highlight) / 20%);
    --shadow-applet-active: 0px 0px 3.5px hsl(var(--scoped-shadow-color) / 41%), 0px 0px 6px hsl(var(--scoped-shadow-color) / 42%), 0px 6px 10px hsl(var(--scoped-shadow-color) / 44%), 0px 8px 12px hsl(var(--scoped-shadow-color) / 48%), 0px 10px 16px hsl(var(--scoped-shadow-color) / 54%),
      0px 15px 25px -3px hsl(var(--scoped-shadow-color) / 54%), 0px 0px 48px hsl(var(--clr-solid) / 14%), inset 0 0 0 0.6px hsl(var(--applet-header-highlight) / 20%);
    --shadow-cursor: 0 1px 5px hsl(var(--scoped-shadow-color) / 11%), 0px 0px 10px 4px hsl(var(--clr-solid) / 5%), 0px 0px 0px 0.8px hsl(var(--clr-solid) / 35%);
  }
}

@layer components {
  .text-xl {
    font-size: 24px;
    line-height: 1.4;
    font-weight: 500;
  }
  .text-prose {
    font-size: 15px;
    line-height: 1.75;
    letter-spacing: 0.01em;
  }
  .text-lg {
    font-size: 15px;
    font-weight: 500;
    line-height: 1.5;
  }
  .text-base {
    font-size: 14px;
    line-height: 1.5;
    letter-spacing: 0.01em;
  }
  .text-sm {
    font-size: 13px;
    line-height: 1.3;
  }
  .text-button {
    font-size: 13px;
    line-height: 1.15;
  }
  .text-button-inverse {
    font-family: var(--font-family-inverse);
    font-size: 13px;
    line-height: 1.15;
  }

  /* prose */

  .prose {
    --base-font-size: 1em;
    --em-multiplier: 1.35;
    --space-half: calc(var(--em-multiplier) * var(--base-font-size) / 6);
    --space-1: calc(var(--em-multiplier) * var(--base-font-size) / 3);
    --space-2: calc(var(--em-multiplier) * var(--base-font-size) * 2 / 3);
    --space-3: calc(var(--em-multiplier) * var(--base-font-size) * 1);
    --space-4: calc(var(--em-multiplier) * var(--base-font-size) * 4 / 3);
    --space-6: calc(var(--em-multiplier) * var(--base-font-size) * 5 / 3);
  }

  .prose > :first-child,
  .prose *:first-child {
    margin-top: 0;
  }

  /* paragraphs */
  .prose p {
    margin-top: var(--space-2);
  }

  /* headings */
  .prose h2,
  .prose h3 {
    font-weight: 500;
    color: theme("colors.display.primary");
  }

  .prose h2 {
    font-size: 1.35em;
    margin-top: var(--space-4);
    line-height: 1.35;
  }

  .prose h3 {
    font-size: 1.095em;
    margin-top: var(--space-3);
    line-height: 1.45;
  }

  /* lists */
  .prose ul,
  .prose ol {
    margin-top: var(--space-1);
    padding-left: var(--space-3);
  }

  .prose ul {
    list-style: disc;
  }

  .prose ul ul {
    list-style: circle;
  }

  .prose ul ul ul {
    list-style: square;
  }

  .prose ol {
    list-style: decimal;
  }

  .prose ::marker {
    color: theme("colors.display.tertiary");
  }

  .prose ol > li {
    padding-left: 4px;
  }

  .prose ul li {
    padding-inline-start: var(--space-half);
  }
  .prose ul li::marker {
    font-size: 0.8em;
  }

  /* small space between items to make it easier to distinguish from items that have two lines. */
  .prose li + li {
    margin-top: calc(0.5 * var(--space-1));
  }
  .prose ul ul,
  .prose ul ol,
  .prose ol ol,
  .prose ol ul {
    margin-top: calc(0.5 * var(--space-1));
  }

  /* horizontal ruler */
  .prose hr {
    margin-block: var(--space-4);
    border-top-width: 1px;
    border-top-color: theme("colors.ui.divider");
  }

  /* blockquote */
  .prose blockquote {
    /* padding-right: var(--space-3); */
    /* text-indent: 2em; */
    color: theme("colors.display.tertiary");
    /* font-size: 0.95em; */
    margin-top: var(--space-3);
    position: relative;
    font-style: italic;
  }

  /* code */
  .prose code {
    font-family: "Source Code Pro", Inconsolata, Monaco, Consolas, "Courier New", Courier, monospace;
    border-radius: 5px;
    font-size: 0.875em;
    padding: 2px 4px;
    margin: 0;
    background-color: theme("colors.clr.neutral");
    /* border-width: 1px; */
    /* border-style: solid; */
    /* border-color: theme("colors.ui.divider"); */
  }

  .prose pre {
    margin-top: var(--space-3);
  }

  .prose pre code {
    display: block;
    padding: var(--space-1) var(--space-2);
    overflow: auto;
  }

  /* images */
  .prose img,
  iframe {
    max-width: 100%;
    max-height: 346px;
    aspect-ratio: 16 / 9;
    width: 100%;
    border-radius: theme("borderRadius.sm");
    border-width: 1px;
    border-style: solid;
    border-color: theme("colors.ui.divider");
    margin-block: var(--space-3);
  }

  .prose li img {
    margin-block: var(--space-2);
  }

  /* headings in relation to other tags */
  .prose h2 + * {
    margin-top: var(--space-1) !important;
  }

  .prose h2 + h3 {
    margin-top: var(--space-3) !important;
  }

  .prose h3 + * {
    margin-top: var(--space-1) !important;
  }

  /* bold and italics */
  .prose b,
  .prose b *:not(a),
  .prose strong,
  .prose strong *:not(a) {
    font-weight: 500;
    color: theme("colors.display.primary");
  }

  .prose em {
    font-style: italic;
  }

  /* links */
  .prose a,
  .prose a * {
    color: theme("colors.display.link");
    text-decoration: underline;
    text-decoration-thickness: 1px;
    /* text-decoration-color: theme("colors.btn.border"); */
  }
  .prose a:hover,
  .prose a:hover * {
    text-decoration: none;
  }

  /* music progress bar */
  input[type="range"] {
    -webkit-appearance: none; /* Hides the slider so that custom slider can be made */
    width: 100%; /* Specific width is required for Firefox. */
    background: transparent; /* Otherwise white in Chrome */
    cursor: pointer;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
  }
  input[type="range"]:focus {
    outline: none; /* Removes the blue border. You should probably do some kind of focus styling for accessibility reasons though. */
  }
  input[type="range"]::-ms-track {
    width: 100%;
    /* Hides the slider so custom styles can be added */
    background: transparent;
    border-color: transparent;
    color: transparent;
  }
  /* Special styling for WebKit/Blink */
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    box-shadow: theme("boxShadow.btn-basic");
    height: 16px;
    width: 16px;
    border-radius: 999px;
    background: theme("colors.btn.bg");
    transform: scale(0);
    transition-property: transform;
    transition-timing-function: theme("transitionTimingFunction.DEFAULT");
    transition-duration: 500ms;
    transition-delay: 300ms;
  }
  input[type="range"]:hover::-webkit-slider-thumb,
  input[type="range"]:focus-visible::-webkit-slider-thumb {
    transform: none;
    transition-delay: 0ms;
    transition-duration: 200ms;
  }
  input[type="range"]::-webkit-slider-thumb:active,
  input[type="range"]::-webkit-slider-thumb:hover {
    background: theme("colors.btn.bg-hover");
  }
  input[type="range"]::-webkit-slider-thumb:active {
    transform: scale(0.9);
  }

  /* All the same stuff for Firefox */
  input[type="range"]::-moz-range-thumb {
    box-shadow: theme("boxShadow.btn-basic");
    height: 16px;
    width: 16px;
    border-radius: 999px;
    background: theme("colors.btn.bg");
    transform: scale(0);
    transition-property: transform;
    transition-timing-function: theme("transitionTimingFunction.DEFAULT");
    transition-duration: 500ms;
    transition-delay: 300ms;
  }
  input[type="range"]:hover::-moz-range-thumb,
  input[type="range"]:focus-visible::-moz-range-thumb {
    transform: none;
    transition-delay: 0ms;
    transition-duration: 200ms;
  }
  input[type="range"]::-moz-range-thumb:active,
  input[type="range"]::-moz-range-thumb:hover {
    background: theme("colors.btn.bg-hover");
  }
  input[type="range"]::-moz-range-thumb:active {
    transform: scale(0.9);
  }

  /* All the same stuff for IE */
  input[type="range"]::-ms-thumb {
    box-shadow: theme("boxShadow.btn-basic");
    height: 16px;
    width: 16px;
    border-radius: 999px;
    background: theme("colors.btn.bg");
    transform: scale(0);
    transition-property: transform;
    transition-timing-function: theme("transitionTimingFunction.DEFAULT");
    transition-duration: 500ms;
    transition-delay: 300ms;
  }
  input[type="range"]:hover::-ms-thumb,
  input[type="range"]:focus-visible::-ms-thumb {
    transform: none;
    transition-delay: 0;
    transition-duration: 200ms;
  }
  input[type="range"]::-ms-thumb:active,
  input[type="range"]::-ms-thumb:hover {
    background: theme("colors.btn.bg-hover");
  }
  input[type="range"]::-ms-thumb:active {
    transform: scale(0.9);
  }

  /* chat applet */

  /* .chat-bubble .tail {
    content: "";
    position: absolute;
    z-index: 1;
    bottom: -2px;
    left: 0;
    border-left: 10px solid theme("colors.clr.neutral");
    border-bottom-right-radius: 16px 14px;
    border-bottom-left-radius: 3px;
    height: 50%;
    transform: translate(0, -2px);
  }

  .chat-bubble.sentByUser .tail {
    border-right: 10px solid theme("colors.clr.solid");
    border-bottom-left-radius: 16px 14px;
    right: 0;
    left: unset;
    border-left: unset;
    border-bottom-right-radius: 3px;
  } */

  .appletListItem {
    @apply transition-shadow duration-200 rounded hover:bg-clr-neutral active:shadow-list-inset;
  }
  .appletListItemContents {
    @apply transition duration-200 group-active:translate-y-px group-active:ease-bounce;
  }

  .appletListItemActive {
    @apply bg-clr-neutral shadow-list-inset;
  }
}

@layer utilities {
  [x-cloak] {
    display: none !important;
  }

  .disabled {
    pointer-events: none;
    opacity: 0.4;
    transition: opacity 250ms ease;
  }

  .grid-absolute {
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
  }

  .grid-inset-0 {
    grid-column: 1/-1;
    grid-row: 1/-1;
  }

  .divider {
    height: 1px;
    flex-shrink: 0;
    @apply bg-ui-divider;
  }
  .divider.vertical {
    height: auto;
    width: 1px;
  }

  .page-container {
    width: 100%;
  }
  @media screen and (max-width: 500px) {
    .page-container {
      margin-inline-start: auto;
      margin-inline-end: auto;
      max-width: 400px;
      padding-inline-start: 8px;
      padding-inline-end: 8px;
    }
  }

  .input-wrapper::after {
    content: attr(data-value) " ";
    visibility: hidden;
    white-space: pre-wrap;
    max-height: 100px;
    padding: 0.5rem 0.75rem;
  }

  .input-wrapper::after,
  .input-wrapper textarea {
    grid-area: 1 / 1;
    width: 100%;
    height: 100%;
    min-width: 1em;
    font: inherit;
    margin: 0;
    resize: none;
    background: none;
    appearance: none;
    border: none;
  }

  .applet-animate {
    animation: appletAnimate 200ms theme(transitionTimingFunction.linear);
  }
  @keyframes appletAnimate {
    0%,
    100% {
      transform: scale(1);
    }
    25% {
      transform: scale(1.008);
    }
  }
}
* {
  cursor: none !important;
}
/* default state */
#cursor div {
  --scale: 1;
  transition-duration: 400ms;
  transition-timing-function: theme("transitionTimingFunction.DEFAULT");
}
/* clicking on a non-actionable */
#cursor.click div {
  --scale: 0.9;
  transition-duration: 200ms;
  transition-timing-function: theme("transitionTimingFunction.bounce-small");
}
/* hovering on an actionabnle */
#cursor.hover div {
  --scale: 1.4;
  transition-duration: 200ms;
  transition-timing-function: theme("transitionTimingFunction.bounce-small");
}
/* clicking on an actionable */
#cursor.hover.click div {
  --scale: 1.2;
}
